<section class="pqrsdf-section position-relative text-white mb-5">
  <img src="assets/img/somos_coonadoc_1.jpg" class="pqrsdf-section-img w-100" alt="Equipo COONADOC">
  <h1 class="pqrsdf-section-title position-absolute top-50 start-50 translate-middle display-3 fw-bold">Peticiones, Quejas, Reclamos y Sugerencias</h1>
</section>

<div class="container my-5">
  <p class="text-center text-black mb-5">
    A través de este formulario podrá enviar Peticiones, Quejas, Reclamos, Solicitudes, Denuncias o Felicitaciones
    relacionadas con nuestros servicios.
  </p>
  <form [formGroup]="pqrsdfForm" (ngSubmit)="onSubmit()" class="p-4 shadow rounded bg-white">
    <div class="mb-3">
      <label for="fecha" class="form-label">Fecha*</label>
      <input type="date" id="fecha" formControlName="fecha" class="form-control" />
    </div>
    <div class="mb-3">
      <label for="correo" class="form-label">Correo Electrónico*</label>
      <input type="email" id="correo" formControlName="correo" class="form-control" />
    </div>
    <div class="mb-3">
      <label for="confirmarCorreo" class="form-label">Repetir Correo Electrónico*</label>
      <input type="email" id="confirmarCorreo" formControlName="confirmarCorreo" class="form-control" />
    </div>
    <div class="mb-3">
      <label for="nombre" class="form-label">Nombre Completo*</label>
      <input type="text" id="nombre" formControlName="nombre" class="form-control" />
    </div>
    <div class="mb-3">
      <label for="movil" class="form-label">Móvil*</label>
      <input type="tel" id="movil" formControlName="movil" class="form-control" />
    </div>
    <div class="row mb-3">
      <div class="col-md-6">
        <label for="dependencia" class="form-label">Dependencia*</label>
        <select id="dependencia" formControlName="dependencia" class="form-select">
          <option disabled selected value="">Seleccione una opción</option>
          @for (d of dependencias; track d) {
          <option [value]="d">{{ d }}</option>
          }
        </select>
      </div>
      <div class="col-md-6">
        <label for="motivo" class="form-label">Motivo PQRSDF*</label>
        <select id="motivo" formControlName="motivo" class="form-select">
          <option disabled selected value="">Seleccione una opción</option>
          @for (m of motivos; track m) {
          <option [value]="m">{{ m }}</option>
          }
        </select>
      </div>
    </div>
    <div class="mb-3">
      <label for="descripcion" class="form-label">Descripción del PQRSDF*</label>
      <textarea id="descripcion" formControlName="descripcion" class="form-control" rows="3"></textarea>
    </div>
    <div class="mb-3">
      <label for="archivo" class="form-label">Adjuntar archivo (opcional)</label>
      <input type="file" id="archivo" (change)="onFileSelected($event)" class="form-control" />
      <small class="text-muted">Formatos aceptados: PDF, JPG, PNG (Máx. 5MB)</small>
    </div>
    <button type="submit" class="btn btn-primary" [disabled]="pqrsdfForm.invalid || isSubmitting">
      @if (isSubmitting) {
        <span class="spinner-border spinner-border-sm" aria-hidden="true"></span>
        <span role="status">Enviando...</span>
      } @else {
        Enviar
      }
    </button>
  </form>
  @if (submitSuccess) {
    <div class="alert alert-success mb-4">
      <strong>¡Éxito!</strong> Tu PQRSDF ha sido enviado correctamente. Nos pondremos en contacto contigo pronto.
    </div>
    }
    @if (errorMessage) {
  <div class="alert alert-danger mb-4">
    <strong>Error:</strong> {{ errorMessage }}
  </div>
  }
</div>